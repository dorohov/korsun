<!DOCTYPE html>

<html>

<head>
	<title>Редактор многоугольника</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script src="https://yastatic.net/jquery/3.1.0/jquery.js" type="text/javascript"></script>
	<script src="//api-maps.yandex.ru/2.0/?load=package.standard,package.geoObjects,package.editor&lang=ru-RU" type="text/javascript"></script>
	
	<script type="text/javascript">
	
	ymaps.ready(init);
	
	function patchCoord(arr) {
		var _arr = [];
		
		for(var i in arr) {
			if(typeof arr[i] == 'number') {
				_arr[i] = parseFloat(arr[i].toFixed(6));
			} else {
				_arr[i] = patchCoord(arr[i]);
			}
		}
		
		return _arr;
	};
	
	function init() {
		var myMap = new ymaps.Map("map", {
			center: [52.7179,36.9904],
			zoom: 16,
		});

		// Создаем многоугольник без вершин.
		var myPolygon = new ymaps.Polygon([], {}, {
			// Курсор в режиме добавления новых вершин.
			editorDrawingCursor: "crosshair",
			// Максимально допустимое количество вершин.
			editorMaxPoints: 1000,
			// Цвет заливки.
			fillColor: '#00FF00',
			// Цвет обводки.
			strokeColor: '#0000FF',
			// Ширина обводки.
			strokeWidth: 1
		});
		// Добавляем многоугольник на карту.
		myMap.geoObjects.add(myPolygon);
		// Указываем тип карты (по умолчанию — схема)
		//myMap.setType('yandex#hybrid');
		
		// В режиме добавления новых вершин меняем цвет обводки многоугольника.
		var stateMonitor = new ymaps.Monitor(myPolygon.editor.state);
		stateMonitor.add("drawing", function (newValue) {
			myPolygon.options.set("strokeColor", newValue ? '#FF0000' : '#0000FF');
		});
		
		// Включаем режим редактирования с возможностью добавления новых вершин.
		myPolygon.editor.startDrawing();
		
		myPolygon.geometry.events.add('change', function () {
			//document.getElementById('result').innerHTML = myPolygon.geometry.getCoordinates();
			$('#result').html(JSON.stringify(patchCoord(myPolygon.geometry.getCoordinates())));
		});
	}
	</script>
</head>
<body>
<style>
	body{
		background: url(/img/maket/map.jpg) no-repeat center 0px; opacity: 0.8
	}
</style>
	<div id="map" style="width:100%; height:850px;"></div>
	<div class="" style="margin-top:40px;" >
		<textarea id="result" style="margin:0px; display:block; height:70px; width:100%" ></textarea>
	</div>
		
</body>
</html>